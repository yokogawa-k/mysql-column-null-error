#################################################################################
#
# The MySQL server
#
[mysqld]
#user                  = mysql
server-id             = master
port                  = 3306
character-set-server  = utf8mb4
collation-server      = utf8mb4_bin
thread_cache_size     = 8
tmp_table_size        = 32M 
max_connect_errors    = 999999999
open_files_limit      = 65535
#datadir               = /db/mysql
#tmpdir                = /db/tmp
#lc_messages_dir       = /usr/klab/app/mysql/share
socket                = mysql.sock
#log-error             = mysql.err
log-bin               = mysql-bin
log-bin-index         = mysql-bin
#log-output            = TABLE
log-output            = FILE
general_log           = 1
general_log_file      = /var/lib/mysql/query.log

loose_log_timestamps        = SYSTEM
slow_query_log        = 1
long_query_time       = 1
relay-log             = relay-bin
relay-log-index       = relay-bin
sync-binlog           = 1
back_log              = 1024
binlog_format         = 'STATEMENT'
secure_file_priv      =
loose_internal_tmp_disk_storage_engine = MYISAM
skip-character-set-client-handshake

explicit-defaults-for-timestamp

################################################################
#
# Innodb Setting
#
#innodb_data_home_dir           = innodb/
innodb_data_file_path          = ibdata1:10M:autoextend
loose_innodb_temp_data_file_path     = ibtmp1:200M
#innodb_log_group_home_dir      = innodb/
#innodb_flush_method            = O_DIRECT
innodb_flush_log_at_trx_commit = 0
innodb_lock_wait_timeout       = 50
innodb_log_file_size           = 128M
innodb_log_buffer_size         = 16M
innodb_log_files_in_group      = 2
innodb_file_per_table
innodb_buffer_pool_instances   = 16
innodb_read_io_threads         = 16
innodb_write_io_threads        = 16
innodb_io_capacity             = 22000
innodb_io_capacity_max         = 44000
innodb_read_ahead_threshold    = 0
innodb_random_read_ahead       = 0
innodb_flush_neighbors         = 0
innodb_purge_threads           = 2

#################################################################
#
# memory 
#
key_buffer_size                 = 64M
max_allowed_packet              = 16M
table_open_cache                = 8192
#
max_connections                 = 8
# per connection
sort_buffer_size                = 256K
read_buffer_size                = 256K
myisam_sort_buffer_size         = 2M
read_rnd_buffer_size            = 4M
join_buffer_size                = 256K
max_heap_table_size             = 32M 
#
query_cache_type                = 0
query_cache_size                = 0
innodb_buffer_pool_size         = 1024M 

[client]
port   = 3306
#socket = /var/lib/mysql/mysqld.sock

[mysqldump]
quick
max_allowed_packet = 16M

[mysql]
no-auto-rehash
#safe-updates
default-character-set = utf8
connect_timeout = 60

#[isamchk]
#key_buffer       = 256M
#sort_buffer_size = 256M
#read_buffer      = 2M
#write_buffer     = 2M
#
#[myisamchk]
#key_buffer       = 256M
#sort_buffer_size = 256M
#read_buffer      = 2M
#write_buffer     = 2M
#
#[mysqlhotcopy]
#interactive-timeout
#
#[mysqld_safe]
#log-error=mysql.err
#
#[mysqlbinlog]
#local-load=/db/tmp
